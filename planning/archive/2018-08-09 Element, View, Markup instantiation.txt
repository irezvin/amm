2018-08-09  

Element + View + Markup instantiation

Проблема: элемент создается отдельно от представления. Нам нужно в Repeater'е или в другом элементе,
создающем элементы, создать и элемент, и его html-разметку (возможно), и Views, которые будут
ссылаться на элемент и на разметку. Затем (или перед тем) html-разметку "подсадить" в DOM.

Вариант А (самый простой, но не универсальный):

-   View и разметка для создаваемого элемента создаются View создающего элемента и определяются
    в удобной для него форме (может быть, сводится к варианту Б)    

Вариант Б (чуть сложнее):

-   у создающего элемента (или у его view)
    -   а)  buildPrototype - html-разметка, по которой builder создаст элемент
    -   б)  buildPrototypeElement - selector элемента с нужной разметкой
    
Вариант В:

-   prototype.views

    Views[0][id] - defaults to view class
    Views[0][htmlElement] - т.к. через jQuery, то нужный элемент будет создан
    
    Views[i][markupRoot] - где мы будем искать htmlElement
        -   а) jQuery selector
        -   б) view:id - мы будем искать в htmlElement'е указанного view нашего элемента
        
Вариант Г:

-   у создаваемого элемента
    
    views[0] instanceof Amm.View.Html.Builder
    views[0][htmlElement] - будет использоваться для разметки
    
    Использует Builder для создания других Views для своего элемента (прототип элемента 
        при этом или не будет использоваться, или мы выругаемся на несоответствие контракту,
        например, на отсутствие нужных traits).
        
    Может создавать другие элементы.
        
    Нужна возможность ссылаться в свойствах и выражениях других элементов на текущий элемент
    builder'а и его предков. 

Варианты А и Б несколько портят инкапсуляцию, т.к. определение View хранится отдельно от элемента.
